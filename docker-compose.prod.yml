name: agent-portabase-prod

services:
  app:
    container_name: agent-portabase-prod
    restart: always
    image: solucetechnologies/agent-portabase:1.0.1
    volumes:
      - ./databases.toml:/app/src/data/config/config.toml
    environment:
      TZ: "Europe/Paris"
      ENVIRONMENT: "development"
      DATABASES_CONFIG_FILE: "config.toml"
      EDGE_KEY: "eyJzZXJ2ZXJVcmwiOiJodHRwOi8vbG9jYWxob3N0Ojg4ODciLCJhZ2VudElkIjoiMmNlMWNiZjEtZjI2MS00MDNiLWEzNTMtMTY3YTgzZGM1N2M1IiwicHVibGljS2V5IjoiLS0tLS1CRUdJTiBSU0EgUFVCTElDIEtFWS0tLS0tXG5NSUlCQ2dLQ0FRRUF3M3JSblI0SHVBeTMwMWVpSWt0dS93ZUMvU1UySnQzZ0JTcktnMy9CaHJ5enM1emdhQWZKXG4xUGJwdUZsTzJhbUJTUThPV1EwZUdBT29vYURYRVBjNTdyT2NYdjI4NkNkQzE3enF6SUhpYjIxZXllNlpKVDNaXG5iT0dMazFWcDI5emt1MXAyQm5NOURyL3YzNHY3bXFXVGF0eE5RajhWb0s1VzQ5cldmeFVMZ2gwSENuOFRXNXdWXG5TYWdNYkh6R1JPVlY5bmRjNDFrYzBXNTFWVTJiZDZZc2JBS2xWRFNDc0pEeUZ2andlRE9kWVJWQ3Zxd2JBblZhXG4wWFhwMnAydGpSOUErSFM3UVpuVlNxVHZITVVUR0dIYjY2bjQrQkhqRm53MGlWdHNaOTduNE9SNTJPVDdXREhoXG5ZMUM3ZnFNWjA0L1BId0VtbEdxQTBrTERxWHBvMUViTEN3SURBUUFCXG4tLS0tLUVORCBSU0EgUFVCTElDIEtFWS0tLS0tXG4ifQ"
    network_mode: host

  db:
    image: postgres:17-alpine
    ports:
      - "5430:5432"
    volumes:
      - postgres-data-prod:/var/lib/postgresql/data
    environment:
      - POSTGRES_DB=devdb
      - POSTGRES_USER=devuser
      - POSTGRES_PASSWORD=changeme
    network_mode: host

  db2:
    image: mariadb:latest
    ports:
      - "3306:3306"
    environment:
      - MYSQL_DATABASE=mariadb
      - MYSQL_USER=mariadb
      - MYSQL_PASSWORD=changeme
      - MYSQL_RANDOM_ROOT_PASSWORD=yes
    volumes:
      - mariadb-data:/var/lib/mysql
    network_mode: host

volumes:
  postgres-data-prod:
  mariadb-data: